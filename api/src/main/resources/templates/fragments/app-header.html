<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
    <!-- App Header -->
    <div class="appHeader bg-primary text-light" th:fragment="app-header">
        <div class="left" th:if="false">
            <a href="#" class="headerButton" data-bs-toggle="modal" data-bs-target="#sidebarPanel">
                <ion-icon name="menu-outline"></ion-icon>
            </a>
        </div>
        <div class="pageTitle input-wrapper">
            <form id="monthForm">
                <img th:src="@{/assets/img/logo.png}" alt="logo" class="logo" th:if="false">
                <input type="month" id="month" name="month" class="form-control custom-select bg-secondary"
                       onchange="redirectToSelectedMonth()"
                       th:value="${selectedMonth}">
            </form>
            <script>
                function redirectToSelectedMonth() {
                    const monthValue = document.getElementById('month').value;
                    const currentUrl = window.location.origin + window.location.pathname;

                    let baseUrl = currentUrl.replace(/\/\d{4}-\d{2}\/?$/, '');

                    baseUrl = baseUrl.replace(/\/$/, '');
                    if (monthValue) {
                        window.location.href = baseUrl + '/' + monthValue;
                    } else {
                        window.location.href = baseUrl;
                    }
                }
            </script>
        </div>
        <div class="right">
            <a href="app-notifications.html" class="headerButton" th:if="false">
                <ion-icon class="icon" name="notifications-outline"></ion-icon>
                <span class="badge badge-danger">4</span>
            </a>
            <a href="#"  class="headerButton dropdown-toggle" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                <img th:src="@{/assets/img/sample/avatar/avatar1.jpg}" alt="image" class="imaged w32">
                <span class="badge badge-danger" th:if="false">6</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                <li>
                <a class="dropdown-item" href="#" th:text="${userAuth}"></a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                    <form th:action="@{/logout}" method="post" style="display:inline;">
                        <button type="submit" class="dropdown-item">Logout</button>
                    </form>
                </li>
            </ul>
        </div>
    </div>
    <!-- * App Header -->
</html>